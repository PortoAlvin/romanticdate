<!DOCTYPE html>
<html lang="id">
<head>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Pacifico&display=swap" rel="stylesheet">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Romantic Date Online</title>
<style>
/* --- BASE STYLES & FONT IMPORTS --- */
body {
  margin: 0;
  background-color: #f0f8ea; /* Latar belakang krem */
  color: #333;
  font-family: 'Poppins', sans-serif;
  display: flex;
  flex-direction: column; /* Untuk menempatkan landing page dan game di tengah vertikal */
  align-items: center;
  min-height: 100vh;
  overflow-x: hidden; /* Mencegah scroll horizontal */
  box-sizing: border-box; /* Pastikan padding tidak menambah ukuran */
}

/* --- GLOBAL ANIMATIONS & EFFECTS --- */
.glow-title {
  font-family: 'Pacifico', cursive;
  font-size: 28px;
  color: white;
  text-shadow: 0 0 8px #ff99c8, 0 0 15px #ff66a3, 0 0 25px #ff4d88;
  margin-bottom: 15px;
  animation: glowPulse 2s infinite alternate;
}
@keyframes glowPulse {
  from { text-shadow: 0 0 5px #ff99c8; }
  to { text-shadow: 0 0 15px #ff4d88; }
}

/* Falling hearts background for game sections */
#heart-container {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 0;
  overflow: hidden; /* Mencegah scroll jika hati keluar area */
}
.falling-heart {
  position: absolute;
  color: #2e7d32; /* Hijau tua untuk hati */
  font-size: 24px;
  animation: fall 3s linear infinite;
  opacity: 0.7;
}
@keyframes fall {
  0% { transform: translateY(-100px); opacity: 0; }
  10% { opacity: 0.7; }
  80% { opacity: 0.7; }
  100% { transform: translateY(120vh); opacity: 0; }
}

.countdown {
  font-size: 60px;
  color: #d6336c;
  animation: blink 1s infinite;
  font-weight: 700;
}
@keyframes blink {
  0%, 100% { opacity: 1; }
  50% { opacity: 0; }
}

/* --- LANDING PAGE STYLES --- */
#landing-page-wrapper {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  width: 100%;
  max-width: 800px;
  padding: 20px;
  box-sizing: border-box;
  text-align: center;
  min-height: 100vh; /* Agar landing page juga memenuhi layar */
}

.title-romantic {
  font-family: 'Poppins', sans-serif;
  font-weight: 700;
  font-size: 2.8em;
  color: #555;
  background-color: #FFDA2F;
  border: 3px solid #000;
  padding: 5px 25px;
  border-radius: 28px;
  box-shadow: 5px 5px 0px rgba(0,0,0,0.8);
  transform: rotate(-3deg);
  margin-bottom: 10px;
  text-transform: uppercase;
}

.title-date-online {
  font-family: 'Poppins', sans-serif;
  font-weight: 700;
  font-size: 3.8em;
  color: #555;
  background-color: #FF99AC;
  border: 3px solid #000;
  padding: 5px 30px;
  border-radius: 35px;
  box-shadow: 5px 5px 0px rgba(0,0,0,0.8);
  transform: rotate(2deg);
  margin-bottom: 60px;
  position: relative;
  left: -10px;
}

.game-options-landing {
  display: flex;
  flex-direction: column;
  gap: 25px;
  width: 100%;
  max-width: 320px;
}

.game-button-landing {
  display: flex;
  align-items: center;
  background-color: #FFF;
  border: 3px solid #000;
  border-radius: 18px;
  padding: 18px 25px;
  font-size: 1.6em;
  font-weight: 600;
  color: #333;
  cursor: pointer;
  box-shadow: 5px 5px 0px rgba(0,0,0,0.8);
  transition: transform 0.1s ease, box-shadow 0.1s ease;
  text-decoration: none;
}

.game-button-landing:hover {
  transform: translate(3px, 3px);
  box-shadow: 2px 2px 0px rgba(0,0,0,0.8);
}

.game-button-landing .icon-box {
  width: 65px;
  height: 65px;
  display: flex;
  justify-content: center;
  align-items: center;
  border: 3px solid #000;
  border-radius: 12px;
  margin-right: 18px;
  flex-shrink: 0;
}

.game-button-landing.deeptalk .icon-box { background-color: #B2EBF2; }
.game-button-landing.truth-dare .icon-box { background-color: #FFCC80; }

.game-button-landing .icon {
  font-size: 2.8em;
  line-height: 1;
  color: #333;
}

/* --- RESPONSIVE ADJUSTMENTS for Landing Page --- */
@media (max-width: 768px) {
  .title-romantic { font-size: 2.2em; padding: 4px 20px; }
  .title-date-online { font-size: 3.2em; padding: 4px 25px; margin-bottom: 50px; left: -5px; }
  .game-options-landing { gap: 20px; max-width: 280px; }
  .game-button-landing { font-size: 1.4em; padding: 15px 20px; }
  .game-button-landing .icon-box { width: 55px; height: 55px; margin-right: 15px; }
  .game-button-landing .icon { font-size: 2.2em; }
}

@media (max-width: 480px) {
  .title-romantic { font-size: 1.8em; padding: 3px 15px; }
  .title-date-online { font-size: 2.5em; padding: 3px 20px; margin-bottom: 40px; left: 0; }
  .game-options-landing { gap: 15px; max-width: 250px; }
  .game-button-landing { font-size: 1.2em; padding: 12px 18px; }
  .game-button-landing .icon-box { width: 48px; height: 48px; margin-right: 12px; }
  .game-button-landing .icon { font-size: 2em; }
}

/* --- GAME AREA STYLES (NEW) --- */
#game-main-content {
  display: none; /* Awalnya tersembunyi */
  flex-direction: column;
  align-items: center;
  width: 95%;
  max-width: 600px;
  padding: 30px;
  box-sizing: border-box;
  border-radius: 15px;
  box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
  background-color: transparent; /* Background game utama transparan, agar background body terlihat */
  position: relative; /* Untuk positioning absolut elemen di dalamnya */
  min-height: 80vh; /* Sesuaikan tinggi agar konten tidak terlalu rapat */
  justify-content: center; /* Pusatkan konten vertikal */
}

#game-main-content.visible {
  display: flex;
}

/* Main game sections */
.content-section {
  background-color: transparent; /* Tetap transparan */
  width: 100%;
  max-width: 500px; /* Lebar maksimal section */
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  padding: 20px 0; /* Sesuaikan padding */
  box-sizing: border-box;
}

/* Specific styling for the header in game view */
.game-header {
  display: flex;
  align-items: center;
  gap: 10px;
  background-color: #ffda69; /* Kuning */
  color: #000;
  padding: 10px 20px;
  border-radius: 10px;
  margin-bottom: 20px;
  font-weight: bold;
  font-size: 1.5em;
  border: 2px solid #000;
  box-shadow: 4px 4px 0px rgba(0,0,0,0.8); /* Efek shadow tebal */
  min-width: 250px; /* Ukuran minimal judul */
  justify-content: center; /* Tengah teks di header */
}

.game-header .icon {
  font-size: 1.8em;
}

/* Question/Answer area */
.question-area {
  background-color: #ffb6c1; /* Pink */
  border: 2px solid #000;
  border-radius: 10px;
  padding: 25px;
  margin-bottom: 20px;
  text-align: center;
  width: 100%;
  box-sizing: border-box;
  font-size: 1.1em;
  box-shadow: 4px 4px 0px rgba(0,0,0,0.8); /* Efek shadow tebal */
  min-height: 180px; /* Tinggi minimal area pertanyaan */
  display: flex;
  flex-direction: column;
  justify-content: center;
}

.player-info {
  font-weight: bold;
  margin-bottom: 10px;
}

.answer-input {
  width: calc(100% - 20px);
  padding: 12px;
  margin: 10px auto; /* Tengah input */
  border-radius: 8px;
  border: 1px solid #000; /* Border hitam */
  font-size: 16px;
  box-sizing: border-box;
  box-shadow: 2px 2px 0px rgba(0,0,0,0.8);
}

/* General button styles */
.main-button {
  background: #ff99c8;
  color: white;
  border: none;
  padding: 12px 25px;
  margin: 10px 5px;
  border-radius: 8px;
  cursor: pointer;
  font-size: 16px;
  transition: background 0.3s ease, transform 0.2s ease;
  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.1);
  border: 2px solid #000; /* Border hitam */
  box-shadow: 4px 4px 0px rgba(0,0,0,0.8); /* Efek shadow tebal */
}
.main-button:hover {
  background: #ff66a3;
  transform: translate(2px, 2px); /* Efek press */
  box-shadow: 2px 2px 0px rgba(0,0,0,0.8);
}
.main-button:active {
  transform: translate(4px, 4px);
  box-shadow: none;
}


.music-buttons button, .mode-buttons button, .truth-dare-buttons button {
    padding: 12px 20px;
    margin: 8px;
    border-radius: 10px;
    cursor: pointer;
    font-size: 15px;
    transition: background 0.3s ease, transform 0.2s ease;
    border: 2px solid #000;
    box-shadow: 4px 4px 0px rgba(0,0,0,0.8);
}
.music-buttons button:hover, .mode-buttons button:hover, .truth-dare-buttons button:hover {
    transform: translate(2px, 2px);
    box-shadow: 2px 2px 0px rgba(0,0,0,0.8);
}
.music-buttons button:active, .mode-buttons button:active, .truth-dare-buttons button:active {
    transform: translate(4px, 4px);
    box-shadow: none;
}


.music-buttons button { background: #e0f7fa; color: #00796b; }
.music-buttons button.selected { background: #00bcd4; color: white; border-color: #0097a7; }

.mode-buttons button { background: #fff3e0; color: #fb8c00; }
.mode-buttons button.selected { background: #ffa726; color: white; border-color: #fb8c00; }

.truth-dare-buttons {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin-top: 20px;
    width: 100%;
}
.truth-dare-buttons button {
    flex: 1;
    max-width: 180px; /* Lebih lebar dari sebelumnya */
    padding: 15px 25px;
    font-size: 1.2em; /* Lebih besar */
    font-weight: 600;
    border-radius: 12px;
}
.truth-dare-buttons #btn-truth { background: #81c784; color: white; }
.truth-dare-buttons #btn-dare { background: #ef5350; color: white; }


/* Result Section Specific Styles */
#result-section ul {
    list-style-type: none;
    padding: 0;
    text-align: left;
    margin-top: 20px;
}
#result-section li {
    background: #f0f0f0;
    padding: 10px;
    border-radius: 8px;
    margin-bottom: 8px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.05);
    border: 1px solid #ddd;
}
#result-section p {
    margin-bottom: 5px;
    font-weight: 600;
}
#result-section .result-actions button {
    margin-top: 20px;
}

.error-message {
    color: #d32f2f;
    font-size: 0.9em;
    margin-top: 5px;
    margin-bottom: 10px;
    text-align: center;
}

/* Hide sections by default. JS will manage display. */
#music-section, #input-section, #name-section, #mode-section,
#deeptalk-mode-selection, #truthordare-mode-selection, #result-section {
  display: none;
  /* Tambahkan transisi jika ingin efek fade-in/out saat display diubah */
  /* transition: opacity 0.5s ease, transform 0.5s ease; */
}

/* Countdown section needs absolute positioning within game-main-content */
#countdown-section {
  display: none;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background-color: rgba(255, 255, 255, 0.9); /* Latar belakang semi-transparan */
  padding: 40px; /* Padding lebih besar */
  border-radius: 20px; /* Sudut lebih membulat */
  text-align: center;
  z-index: 10; /* Pastikan di atas elemen lain */
  border: 2px solid #000;
  box-shadow: 8px 8px 0px rgba(0,0,0,0.8);
}

/* Responsive adjustments for game sections */
@media (max-width: 768px) {
    #game-main-content {
        padding: 20px;
        min-height: 90vh;
    }
    .game-header {
        font-size: 1.2em;
        padding: 8px 15px;
    }
    .question-area {
        padding: 15px;
        font-size: 1em;
        min-height: 150px;
    }
    .truth-dare-buttons button {
        font-size: 1em;
        padding: 12px 20px;
        max-width: 150px;
    }
    .main-button {
        padding: 10px 20px;
        font-size: 15px;
    }
    input[type="text"], input[type="number"] {
        padding: 10px;
        font-size: 14px;
    }
    .countdown {
        font-size: 40px;
    }
}
</style>
</head>
<body>

<div id="heart-container"></div>

<div id="landing-page-wrapper">
  <div class="title-romantic">ROMANTIC</div>
  <div class="title-date-online">DATE ONLINE</div>

  <div class="game-options-landing">
    <button onclick="startFullGame('deeptalk')" class="game-button-landing deeptalk">
      <div class="icon-box"><span class="icon">🗓️</span></div>
      Deeptalk
    </button>
    <button onclick="startFullGame('truthordare')" class="game-button-landing truth-dare">
      <div class="icon-box"><span class="icon">✅</span></div>
      Truth or Dare
    </button>
  </div>
</div>
<div id="game-main-content">
  <div id="game-section" class="content-section">
    <div class="game-header" id="dynamic-game-header">
      <span class="icon" id="header-icon">🗓️</span> <span id="header-title">DEEPTALK</span>
    </div>
    <div class="question-area">
      <p class="player-info"><b id="game-player-name"></b> - <span id="game-type-indicator"></span></p>
      <h3 id="display-game-content"></h3>
      <input type="text" id="answer" placeholder="Tulis jawabanmu di sini..." class="answer-input hidden"><br>
      <div id="answer-error" class="error-message hidden"></div>
    </div>
    <button class="main-button" id="next-question-btn" onclick="nextGameTurn()">Lanjut</button>
  </div>

  <div id="music-section" class="content-section">
    <h2>Pilih Musik Background</h2>
    <p>Pilih musik yang akan mengiringi permainanmu:</p>
    <div class="music-buttons">
      <button id="btn-bcl" onclick="selectMusic('bcl')">🎵 Cinta Sejati (BCL)</button>
      <button id="btn-dygta" onclick="selectMusic('dygta')">🎵 Tapi Tahukah Kamu (Dygta)</button>
      <button id="btn-none" onclick="selectMusic('none')">🔇 Tanpa Musik</button>
    </div>
    <div id="music-error" class="error-message hidden"></div>
  </div>

  <div id="input-section" class="content-section">
    <h2>Atur Jumlah Pemain</h2>
    <p>Masukkan jumlah pemain (2-4):</p>
    <input type="number" id="player-count" min="2" max="4" placeholder="Contoh: 3"><br>
    <div id="player-count-error" class="error-message hidden"></div>
    <button class="main-button" onclick="setPlayerCount()">Lanjut</button>
  </div>

  <div id="name-section" class="content-section">
    <h2>Masukkan Nama Pemain</h2>
    <p>Silakan masukkan nama setiap pemain:</p>
    <div id="name-inputs"></div>
    <div id="name-error" class="error-message hidden"></div>
    <button class="main-button" onclick="saveNames()">Lanjut</button>
  </div>

  <div id="mode-section" class="content-section">
    <h2>Pilih Jenis Permainan</h2>
    <p>Pilih mode permainan yang ingin dimainkan:</p>
    <div class="mode-buttons">
      <button id="btn-mode-deeptalk" onclick="selectGameMode('deeptalk')">Deep Talk</button>
      <button id="btn-mode-truthordare" onclick="selectGameMode('truthordare')">Truth or Dare</button>
    </div>
    <div id="game-mode-selection-error" class="error-message hidden"></div>
  </div>

  <div id="deeptalk-mode-selection" class="content-section">
    <h2>Pilih Tema Deep Talk</h2>
    <p>Pilih tema pertanyaan untuk Deep Talk:</p>
    <div class="mode-buttons">
      <button id="btn-mode-romantis" onclick="startGame('deeptalk', 'romantis')">Romantis</button>
      <button id="btn-mode-persahabatan" onclick="startGame('deeptalk', 'persahabatan')">Persahabatan</button>
      <button id="btn-mode-random" onclick="startGame('deeptalk', 'random')">Random</button>
    </div>
    <div id="deeptalk-mode-error" class="error-message hidden"></div>
  </div>

  <div id="truthordare-mode-selection" class="content-section">
    <h2>Truth or Dare!</h2>
    <p>Pilih Truth atau Dare, <span id="current-player-tod"></span>?</p>
    <div class="truth-dare-buttons">
      <button id="btn-truth-choice" onclick="playTruthOrDare('truth')">Truth</button>
      <button id="btn-dare-choice" onclick="playTruthOrDare('dare')">Dare</button>
    </div>
    <div id="tod-choice-error" class="error-message hidden"></div>
  </div>

  <div id="countdown-section" class="content-section">
    <h2 id="countdown-title">Siap-Siap!</h2>
    <p id="countdown-message">Permainan akan segera dimulai...</p>
    <div class="countdown" id="countdown-timer">3</div>
  </div>

  <div id="result-section" class="content-section">
    <h2 class="glow-title">Permainan Selesai!</h2>
    <div id="results-display" style="text-align: left; display: inline-block; width: 100%;"></div>
    <div class="result-actions">
      <button class="main-button" onclick="saveResult()">💾 Save Hasil</button>
      <button class="main-button" onclick="shareResult()">📤 Share/Copy</button>
      <button class="main-button" onclick="resetGame()">🔄 Main Lagi</button>
    </div>
  </div>

  <audio id="bgm-bcl" loop><source src="audio/bcl.mp3"></audio>
  <audio id="bgm-dygta" loop><source src="audio/dygta.mp4"></source></audio>
  <audio id="sfx-click"><source src="audio/click.mp3"></source></audio>
</div>
<script>
// --- KONSTANTA ---
const PLAYER_MIN = 2;
const PLAYER_MAX = 4;
const QUESTIONS_PER_PLAYER = 5;

const DEEPTALK_MODES = {
  romantis: [
    "Apa arti cinta buatmu?", "Momen paling romantis yang pernah kamu alami?", "Kapan kamu merasa paling dicintai?",
    "Apa impian romantismu?", "Pernah cemburu? Ceritakan.", "Apa yang bikin kamu jatuh cinta sama seseorang?",
    "Menurutmu, apa itu cinta sejati?", "Hal paling manis yang pernah kamu lakukan buat seseorang?",
    "Kapan terakhir kamu bilang ‘aku sayang kamu’?", "Kalau kita jalan bareng, kamu pengen ke mana?",
    "Menurutmu lebih penting sayang atau setia?", "Kalau cinta bertepuk sebelah tangan, apa yang kamu lakukan?",
    "Apa kenangan cinta pertama kamu?", "Apa lagu yang ngingetin kamu sama cinta?",
    "Cinta atau karir? Pilih dan kenapa?", "Pernah suka diam-diam?", "Apa yang bikin kamu merasa dicintai?",
    "Kapan kamu merasa paling diperhatikan?", "Apa yang paling kamu takutkan dalam hubungan?",
    "Kalau kamu nembak, apa yang bakal kamu katakan?",
    "Bagaimana kamu menunjukkan cinta?", "Apa definisi pasangan ideal menurutmu?", "Pernah bikin kejutan buat pasangan?",
    "Hal kecil apa yang buatmu bahagia dari pasangan?", "Pernah rela berkorban demi cinta?",
    "Menurutmu, cinta itu tentang apa?", "Apa yang bikin kamu ilfeel dalam hubungan?",
    "Kalau pasanganmu cemburu, kamu bakal?", "Apa kamu percaya cinta pandangan pertama?",
    "Lebih suka hubungan santai atau serius?", "Apa yang paling kamu inginkan dari pasangan?",
    "Cinta sejati menurutmu harus diperjuangkan?", "Pernah merasa patah hati banget? Ceritakan.",
    "Apa hadiah romantis yang pernah kamu kasih?", "Kalau kamu jatuh cinta lagi, apa yang kamu lakukan berbeda?",
    "Menurutmu, cemburu itu tanda cinta?", "Hal apa yang gak boleh ada dalam hubungan?",
    "Kapan terakhir kamu bilang sayang ke orang?", "Menurutmu, cinta bisa hilang gak?",
    "Apa kenangan romantis yang gak bisa kamu lupakan?"
  ],
  persahabatan: [
    "Apa arti sahabat buatmu?", "Siapa sahabat yang paling kamu percaya?", "Momen paling lucu bareng sahabat?",
    "Pernah berantem sama sahabat? Kenapa?", "Sahabat itu menurutmu harus selalu ada atau bebas?",
    "Hal gila apa yang pernah kamu lakuin sama sahabat?", "Pernah suka sama sahabat sendiri?",
    "Apa yang paling kamu syukuri dari sahabat?", "Kalau sahabatmu disakiti orang lain, apa yang kamu lakukan?",
    "Menurutmu sahabat sejati itu yang kayak gimana?", "Kapan terakhir kamu curhat ke sahabat?",
    "Apa kenangan paling berkesan sama sahabat?", "Kamu lebih suka nongkrong rame atau berdua sama sahabat?",
    "Siapa sahabat yang udah lama gak kamu temui?", "Pernah ditolong sahabat? Ceritakan.",
    "Pernah ngerasa dikhianati sahabat?", "Apa impian kamu bareng sahabat?",
    "Kalau sahabat butuh bantuan, apa yang kamu lakukan?", "Sahabat atau pacar, siapa yang lebih kamu butgkan?",
    "Apa hal yang kamu pelajari dari sahabat?",
    "Pernah bohong ke sahabat? Kenapa?", "Apa yang bikin kamu nyaman berteman dengan seseorang?",
    "Kalau sahabatmu pindah kota, apa yang kamu lakukan?", "Apa arti setia kawan buat kamu?",
    "Kapan kamu merasa benar-benar dihargai oleh sahabat?", "Apa momen paling gila bareng sahabat?",
    "Kalau sahabatmu lagi down, apa yang kamu lakukan?", "Pernah berbagi rahasia besar dengan sahabat?",
    "Hal kecil yang bikin kamu ingat sahabat?", "Pernah traveling bareng sahabat?",
    "Apa yang membuat sahabat jadi sahabat sejati menurutmu?", "Kalau sahabatmu berubah, apa yang kamu lakukan?",
    "Hal paling konyol yang pernah kamu dan sahabat lakukan?", "Kalau ada masalah, siapa sahabat yang pertama kamu hubungi?",
    "Pernah salah paham dengan sahabat? Bagaimana selesaikan?", "Apa kenangan masa kecil bersama sahabat?",
    "Apa kamu lebih suka punya banyak sahabat atau sedikit tapi dekat?", "Menurutmu sahabat harus selalu ada kapanpun?",
    "Apa pesan yang ingin kamu sampaikan ke sahabatmu sekarang?", "Pernah merasa kehilangan sahabat? Ceritakan."
  ],
  random: [
    "Kalau kamu punya kekuatan super, kamu pengen apa?", "Apa makanan favorit kamu?",
    "Hal paling memalukan yang pernah kamu alami?", "Pernah bohong sama siapa? Kenapa?",
    "Kamu lebih suka pagi atau malam?", "Hobi unik kamu apa?",
    "Siapa orang yang paling sering kamu pikirin?", "Pernah ngalamin kejadian aneh gak?",
    "Apa impian terbesarmu?", "Pernah patah hati? Kenapa?",
    "Kalau liburan, kamu pengen ke mana?", "Apa yang bikin kamu marah banget?",
    "Kalau dapet 1M, kamu bakal ngapain?", "Hal yang paling kamu takutin?",
    "Siapa idola kamu?", "Kalau disuruh milih, kamu pilih cinta atau uang?",
    "Apa yang bikin kamu bahagia sederhana?", "Kalau bisa mundur ke masa lalu, kamu pengen apa?",
    "Apa cita-cita kamu waktu kecil?", "Apa bakat tersembunyi kamu?",
    "Pernah mimpi aneh? Ceritakan.", "Apa film favorit kamu dan kenapa?",
    "Kalau bisa tinggal di mana saja, kamu pilih di mana?", "Apa hal paling spontan yang pernah kamu lakukan?",
    "Kalau harus pilih satu makanan seumur hidup, apa?", "Pernah punya pengalaman horor?",
    "Apa benda yang selalu kamu bawa kemana-mana?", "Siapa orang yang paling menginspirasimu?",
    "Apa lagu yang paling sering kamu dengerin?", "Kalau bisa jadi karakter kartun, siapa kamu?",
    "Apa aplikasi yang paling sering kamu pakai?", "Apa hal paling random yang pernah kamu beli?",
    "Pernah prank orang? Ceritakan!", "Apa tempat paling aneh yang pernah kamu kunjungi?",
    "Pernah ngomong tanpa mikir dan nyesel?", "Kalau dikasih libur seminggu, kamu ngapain?",
    "Apa barang paling berharga yang kamu punya?", "Kalau punya mesin waktu, ke mana kamu pergi?",
    "Apa skill random yang kamu bisa?", "Apa kebiasaan aneh kamu?"
  ]
};

const TRUTH_QUESTIONS = [
    "Apa rahasia terbesar yang pernah kamu simpan?", "Apa hal paling memalukan yang pernah kamu alami?",
    "Siapa gebetanmu saat ini (jika ada)?", "Apa penyesalan terbesarmu?",
    "Pernah mencuri sesuatu? Apa dan kenapa?", "Apa kebiasaan anehmu yang tidak diketahui orang lain?",
    "Apa hal yang paling kamu takuti?", "Apa yang paling kamu suka dan tidak suka dari dirimu?",
    "Kapan terakhir kamu menangis dan kenapa?", "Apa hal terburuk yang pernah kamu katakan pada seseorang?",
    "Jika kamu bisa mengubah satu hal dari masa lalumu, apa itu?", "Apa fantasimu yang paling aneh?",
    "Pernah berbohong pada orang tuamu tentang apa?", "Apa hal paling konyol yang pernah kamu lakukan demi cinta?",
    "Apa pendapat jujurmu tentang orang di sebelah kirimu?", "Apa yang paling kamu inginkan saat ini?",
    "Apa hal terbodoh yang pernah kamu percaya?", "Pernah menguping pembicaraan orang lain? Tentang apa?",
    "Apa mimpi buruk yang paling sering kamu alami?", "Apa yang paling kamu benci dari sekolah/pekerjaanmu?",
    "Apa satu hal yang kamu tidak akan pernah lakukan lagi?"
];

const DARE_CHALLENGES = [
    "Kirim pesan ke orang terakhir di kontakmu dengan emoji aneh.", "Bernyanyi lagu anak-anak dengan suara keras.",
    "Lakukan tarian lucu selama 10 detik.", "Telepon orang tuamu dan katakan 'Aku cinta padamu'.",
    "Ganti profil picturemu dengan foto jelek selama 1 jam.", "Makan satu sendok teh bubuk kopi.",
    "Lakukan push-up 10 kali.", "Berpura-pura menjadi hewan sampai giliranmu tiba.",
    "Ceritakan lelucon terburuk yang kamu tahu.", "Biarkan pemain lain menggambar di wajahmu.",
    "Makan sepotong bawang mentah.", "Telepon temanmu dan bicara dengan aksen lucu selama 1 menit.",
    "Lakukan handstand atau sikap lilin selama 5 detik.", "Ucapkan 'Aku suka pisang' setiap kali kamu berbicara selama 2 menit.",
    "Berikan pujian tulus kepada setiap pemain.",
    "Tiru suara hewan favoritmu.",
    "Coba jilat sikumu.", "Kirim pesan suara acak ke temanmu.",
    "Lakukan aegyo (pose imut ala Korea).", "Ceritakan momen paling canggung yang pernah kamu alami.",
    "Lakukan catwalk selama 10 detik."
];


// --- VARIABLE GLOBAL ---
let selectedMusic = '';
let players = [];
let gameType = ''; // 'deeptalk' atau 'truthordare'
let gameMode = ''; // Untuk Deep Talk: 'romantis', 'persahabatan', 'random' (null jika Truth or Dare)
let currentContentList = []; // Akan berisi pertanyaan/tantangan spesifik untuk game saat ini
let askedContent = []; // Melacak konten (pertanyaan/tantangan) yang sudah ditanyakan untuk menghindari duplikasi
let currentPlayerIndex = 0;
let currentTurnIndex = 0; // Untuk melacak giliran (pertanyaan ke-x atau tantangan ke-x) per pemain
let totalTurnsPerPlayer = QUESTIONS_PER_PLAYER; // Akan disesuaikan jika Truth or Dare punya jumlah giliran beda

// --- FUNGSI UTAMA ---
function showSection(idToShow) {
  // Sembunyikan semua section konten dalam game-main-content
  document.querySelectorAll('#game-main-content .content-section').forEach(section => {
    section.style.display = 'none';
  });

  // Tampilkan section yang diminta
  const targetSection = document.getElementById(idToShow);
  if (targetSection) {
    targetSection.style.display = 'flex'; // Gunakan flex untuk menengahkan konten
  }

  // Update header title and icon based on the current section
  const headerIcon = document.getElementById('header-icon');
  const headerTitle = document.getElementById('header-title');
  const gameHeader = document.getElementById('dynamic-game-header');

  if (idToShow === 'game-section') {
      gameHeader.style.display = 'flex'; // Show header only for game-section
      if (gameType === 'deeptalk') {
          headerIcon.innerText = '🗓️';
          headerTitle.innerText = 'DEEPTALK';
      } else if (gameType === 'truthordare') {
          headerIcon.innerText = '😈';
          headerTitle.innerText = 'TRUTH OR DARE';
      }
  } else {
      gameHeader.style.display = 'none'; // Hide header for other sections
  }

  playClick(); // Play sound for section change
}

// Inisialisasi tampilan awal
document.addEventListener('DOMContentLoaded', () => {
    document.getElementById('landing-page-wrapper').style.display = 'flex';
    document.getElementById('game-main-content').style.display = 'none'; // Pastikan display none
});

// Fungsi untuk memulai game penuh dari landing page
function startFullGame(selectedGameType) {
    gameType = selectedGameType; // Set gameType secara global
    document.getElementById('landing-page-wrapper').style.display = 'none'; // Sembunyikan landing page
    document.getElementById('game-main-content').style.display = 'flex'; // Tampilkan game wrapper
    document.getElementById('game-main-content').classList.add('visible'); // Aktifkan transisi

    // Initialize players for Truth or Dare immediately, as it skips player input
    if (gameType === 'truthordare') {
        players = [];
        for (let i = 0; i < 2; i++) { // Default to 2 players for Truth or Dare
            players.push({ name: `Player ${i + 1}`, answers: [], todAnswers: [] });
        }
    }

    // Selalu mulai dari musik
    showSection('music-section');
}


function selectMusic(choice) {
  selectedMusic = choice;
  stopAllMusic();
  if (choice === 'bcl') document.getElementById('bgm-bcl').play();
  if (choice === 'dygta') document.getElementById('bgm-dygta').play();

  // Hapus semua kelas 'selected' dari tombol musik
  document.querySelectorAll('.music-buttons button').forEach(button => {
      button.classList.remove('selected');
  });
  // Tambahkan kelas 'selected' ke tombol yang dipilih
  document.getElementById(`btn-${choice}`).classList.add('selected');

  // Lanjutkan sesuai gameType
  setTimeout(() => {
    hideErrorMessage('music-error');
    if (gameType === 'deeptalk') {
        showSection('input-section'); // Deep Talk goes to player count
    } else if (gameType === 'truthordare') {
        // Truth or Dare skips player count/name input and goes directly to mode selection
        totalTurnsPerPlayer = QUESTIONS_PER_PLAYER; // Set turns for Truth or Dare
        startGame(gameType, null); // Start TOD directly, it will lead to countdown then player turn
    }
  }, 300);
}

function stopAllMusic() {
  document.getElementById('bgm-bcl').pause();
  document.getElementById('bgm-dygta').pause();
  document.getElementById('bgm-bcl').currentTime = 0;
  document.getElementById('bgm-dygta').currentTime = 0;
}

function playClick() {
  const sfx = document.getElementById('sfx-click');
  sfx.currentTime = 0;
  sfx.play();
}

// Animasi Background (Hearts)
function setupFallingHearts() {
  const heartContainer = document.getElementById('heart-container');
  heartContainer.innerHTML = ''; // Bersihkan hati sebelumnya
  // Membuat 30 hati yang jatuh secara acak
  for (let i = 0; i < 30; i++) {
    const heart = document.createElement('div');
    heart.className = 'falling-heart';
    heart.innerText = '💚';
    heart.style.left = Math.random() * 100 + 'vw';
    heart.style.animationDelay = Math.random() * 3 + 's'; // Variasi waktu mulai
    heartContainer.appendChild(heart);
  }
}

function stopFallingHearts() {
    document.getElementById('heart-container').innerHTML = ''; // Clear all hearts
}

function resetGame() {
  location.reload(); // Cara paling sederhana untuk reset total dan kembali ke landing page
}

// Input Section (Player Count)
function setPlayerCount() {
  const countInput = document.getElementById('player-count').value.trim();
  const errorDiv = document.getElementById('player-count-error');
  errorDiv.classList.add('hidden'); // Sembunyikan pesan error sebelumnya

  if (!countInput) {
    errorDiv.innerText = 'Jumlah pemain tidak boleh kosong.';
    errorDiv.classList.remove('hidden');
    return;
  }
  if (!/^\d+$/.test(countInput)) {
    errorDiv.innerText = 'Harap masukkan angka yang valid.';
    errorDiv.classList.remove('hidden');
    return;
  }
  const count = parseInt(countInput);
  if (count < PLAYER_MIN) {
    errorDiv.innerText = `Kamu harus cari teman lagi! Minimal ${PLAYER_MIN} pemain.`;
    errorDiv.classList.remove('hidden');
    return;
  }
  if (count > PLAYER_MAX) {
    errorDiv.innerText = `Maaf melebihi kapasitas! Maksimal ${PLAYER_MAX} pemain.`;
    errorDiv.classList.remove('hidden');
    return;
  }

  players = [];
  for (let i = 0; i < count; i++) {
      players.push({ name: '', answers: [], todAnswers: [] });
  }
  showNameInput();
}

// Name Section
function showNameInput() {
  showSection('name-section');
  const nameInputsDiv = document.getElementById('name-inputs');
  nameInputsDiv.innerHTML = ''; // Bersihkan input sebelumnya
  players.forEach((_, i) => {
    nameInputsDiv.innerHTML += `
      <label for="name-${i}">Nama Player ${i + 1}:</label>
      <input type="text" id="name-${i}" placeholder="Masukkan nama"><br>
    `;
  });
  hideErrorMessage('name-error');
}

function saveNames() {
  let allNamesValid = true;
  const errorDiv = document.getElementById('name-error');
  errorDiv.classList.add('hidden'); // Sembunyikan pesan error sebelumnya

  players.forEach((player, i) => {
    const nameInput = document.getElementById(`name-${i}`);
    const name = nameInput.value.trim();
    if (!name) {
      allNamesValid = false;
      nameInput.style.borderColor = '#d32f2f'; // Highlight input yang kosong
    } else {
      players[i].name = name;
      nameInput.style.borderColor = '#000'; // Reset border to black
    }
  });

  if (!allNamesValid) {
    errorDiv.innerText = 'Semua nama pemain harus diisi!';
    errorDiv.classList.remove('hidden');
    return;
  }

  // Setelah nama diisi, lanjutkan sesuai gameType yang dipilih di awal
  if (gameType === 'deeptalk') {
      showSection('deeptalk-mode-selection'); // Pindah ke pemilihan tema Deep Talk
  } else if (gameType === 'truthordare') {
      // This branch should ideally not be reached if Truth or Dare skips input section
      // But keeping it for robustness if flow changes.
      totalTurnsPerPlayer = QUESTIONS_PER_PLAYER;
      startGame(gameType, null); // Langsung mulai Truth or Dare tanpa sub-mode
  }
  hideErrorMessage('game-mode-selection-error');
}


// Start Game (after selecting Deep Talk specific mode or if Truth or Dare selected)
function startGame(type, mode = null) {
  // Pastikan pemain sudah diatur sebelum memulai game
  if (players.length === 0) {
      alert("Harap masukkan jumlah dan nama pemain terlebih dahulu!");
      // For Deep Talk, return to input section. For Truth or Dare, this shouldn't happen
      showSection('input-section');
      return;
  }

  gameType = type; // 'deeptalk' atau 'truthordare'
  gameMode = mode; // 'romantis', 'persahabatan', 'random' (null jika Truth or Dare)

  // Tandai mode jika Deep Talk
  if (gameType === 'deeptalk' && mode) {
    document.querySelectorAll('#deeptalk-mode-selection .mode-buttons button').forEach(btn => btn.classList.remove('selected'));
    document.getElementById(`btn-mode-${mode}`).classList.add('selected');
    totalTurnsPerPlayer = QUESTIONS_PER_PLAYER;
    hideErrorMessage('deeptalk-mode-error');
  }

  // Persiapan konten (pertanyaan/tantangan)
  askedContent = []; // Reset list konten yang sudah ditanyakan
  currentContentList = []; // Clear list konten untuk game ini

  if (gameType === 'deeptalk') {
      const allPossibleQuestions = [...DEEPTALK_MODES[gameMode]];
      // Ambil cukup pertanyaan untuk semua pemain, semua giliran.
      // Jika kurang, akan di-shuffle ulang di displayDeepTalkQuestion
      currentContentList = shuffleArray(allPossibleQuestions);
  }

  currentPlayerIndex = 0;
  currentTurnIndex = 0; // Reset hitungan giliran per pemain

  setupFallingHearts(); // Start heart animation

  // Langsung ke countdown
  setTimeout(() => startCountdown(), 300);
}

// NEW FUNCTION: Show "Giliran [Player Name]" notification
function showPlayerTurn(playerObj) {
  showSection('countdown-section'); // Use the existing countdown section
  const countdownTitle = document.getElementById('countdown-title');
  const countdownMessage = document.getElementById('countdown-message');
  const countdownTimer = document.getElementById('countdown-timer');

  countdownTitle.innerText = 'Giliranmu!'; // Change title for turn message
  countdownMessage.innerHTML = `<span style="font-weight: bold; color: #d6336c;">${playerObj.name}</span>`; // Just the player name
  countdownTimer.style.display = 'none'; // Hide the numbers for this message

  setTimeout(() => {
    countdownTitle.innerText = 'Siap-Siap!'; // Reset title
    countdownMessage.innerHTML = 'Permainan akan segera dimulai...'; // Reset message
    countdownTimer.style.display = 'block'; // Show numbers again if needed

    if (gameType === 'deeptalk') {
        displayDeepTalkQuestion(); // Proceed to Deep Talk question
    } else if (gameType === 'truthordare') {
        showSection('truthordare-mode-selection'); // Proceed to Truth or Dare choice
        document.getElementById('current-player-tod').innerText = playerObj.name; // Update player name for TOD choice
    }
  }, 2000); // Display "Giliran [Nama Player]" for 2 seconds
}

function startCountdown() {
  showSection('countdown-section');
  const countdownTitle = document.getElementById('countdown-title');
  const countdownMessage = document.getElementById('countdown-message');
  const countdownTimer = document.getElementById('countdown-timer');

  countdownTitle.innerText = 'Siap-Siap!'; // Initial title
  countdownMessage.innerHTML = 'Permainan akan segera dimulai...'; // Initial message
  countdownTimer.style.display = 'block'; // Ensure numbers are visible for initial countdown

  countdownTimer.innerText = '3';
  let count = 3;
  const interval = setInterval(() => {
    count--;
    if (count === 0) {
      clearInterval(interval);
      // After initial countdown, show the first player's turn message
      showPlayerTurn(players[currentPlayerIndex]);
    } else {
      countdownTimer.innerText = count;
    }
  }, 1000);
}

function shuffleArray(array) {
  let arr = [...array];
  for (let i = arr.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
  return arr;
}

// --- Deep Talk Game Logic ---
function displayDeepTalkQuestion() {
  showSection('game-section'); // This will also ensure setupFallingHearts() is called
  hideErrorMessage('answer-error');

  // Pastikan input jawaban dan tombol "Jawab" terlihat
  document.getElementById('answer').classList.remove('hidden');
  document.getElementById('answer').style.display = 'block'; // Make sure it's block
  document.getElementById('next-question-btn').innerText = 'Jawab';
  document.getElementById('next-question-btn').onclick = saveDeepTalkAnswer; // Pastikan fungsi yang benar dipanggil

  // Cek apakah semua pemain sudah selesai
  if (currentPlayerIndex >= players.length) {
    showResults();
    return;
  }

  const currentPlayerObj = players[currentPlayerIndex];

  // Only proceed if the current player still has turns left in this round
  if (currentTurnIndex < totalTurnsPerPlayer) {
      document.getElementById('game-type-indicator').innerText = `Pertanyaan ke-${currentTurnIndex + 1}`;

      // Pilih pertanyaan baru yang belum ditanyakan
      let questionText;
      let availableQuestions = currentContentList.filter(q => !askedContent.includes(q));

      if (availableQuestions.length === 0) {
        // Jika semua pertanyaan dari currentContentList sudah ditanyakan,
        // ambil pool penuh lagi dan acak ulang.
        console.warn("Out of Deep Talk questions, re-shuffling general pool.");
        currentContentList = shuffleArray([...DEEPTALK_MODES[gameMode]]);
        askedContent = []; // Reset daftar yang sudah ditanyakan
        availableQuestions = [...currentContentList]; // Gunakan pool baru
      }

      questionText = availableQuestions[Math.floor(Math.random() * availableQuestions.length)];
      askedContent.push(questionText); // Tambahkan ke daftar yang sudah ditanyakan

      document.getElementById('game-player-name').innerText = currentPlayerObj.name;
      document.getElementById('display-game-content').innerText = questionText;
      document.getElementById('answer').value = ''; // Kosongkan input jawaban
      document.getElementById('answer').focus(); // Fokuskan input
  } else {
    // Current player has finished all their turns
    currentPlayerIndex++; // Move to next player
    currentTurnIndex = 0; // Reset turn count for new player
    if (currentPlayerIndex < players.length) {
        // Start turn notification for the next player
        showPlayerTurn(players[currentPlayerIndex]);
    } else {
        showResults();
    }
  }
}

function saveDeepTalkAnswer() {
  const answerInput = document.getElementById('answer');
  const answer = answerInput.value.trim();
  const errorDiv = document.getElementById('answer-error');
  errorDiv.classList.add('hidden'); // Sembunyikan pesan error sebelumnya

  if (!answer) {
    errorDiv.innerText = 'Jawaban tidak boleh kosong!';
    errorDiv.classList.remove('hidden');
    answerInput.style.borderColor = '#d32f2f'; // Highlight input yang kosong
    return;
  } else {
    answerInput.style.borderColor = '#000'; // Reset border to black as per design
  }

  players[currentPlayerIndex].answers.push({
    type: 'Deep Talk',
    mode: gameMode,
    question: document.getElementById('display-game-content').innerText,
    answer: answer
  });
  currentTurnIndex++;
  displayDeepTalkQuestion(); // Lanjutkan ke pertanyaan berikutnya atau pemain berikutnya
}


// --- Truth or Dare Game Logic ---
function playTruthOrDare(choice) {
    hideErrorMessage('tod-choice-error');
    let content = '';
    let currentPlayersTodType = choice; // Simpan pilihan Truth/Dare pemain saat ini

    document.getElementById('answer').classList.add('hidden'); // Sembunyikan input jawaban
    document.getElementById('answer').style.display = 'none'; // Ensure it's not displayed
    document.getElementById('next-question-btn').innerText = 'Lanjut'; // Ubah teks tombol menjadi "Lanjut"
    document.getElementById('next-question-btn').onclick = nextGameTurn; // Panggil nextGameTurn

    document.getElementById('game-type-indicator').innerText = choice === 'truth' ? 'Truth' : 'Dare';

    if (choice === 'truth') {
        let availableTruths = TRUTH_QUESTIONS.filter(q => !askedContent.includes(q));
        if (availableTruths.length === 0) {
            availableTruths = [...TRUTH_QUESTIONS]; // Reset if all used
            askedContent = []; // Clear asked content to avoid re-using from same pool
            console.warn("Out of Truth questions, re-shuffling pool.");
        }
        content = availableTruths[Math.floor(Math.random() * availableTruths.length)];
    } else { // Dare
        let availableDares = DARE_CHALLENGES.filter(d => !askedContent.includes(d));
        if (availableDares.length === 0) {
            availableDares = [...DARE_CHALLENGES]; // Reset if all used
            askedContent = []; // Clear asked content to avoid re-using from same pool
            console.warn("Out of Dare challenges, re-shuffling pool.");
        }
        content = availableDares[Math.floor(Math.random() * availableDares.length)];
    }
    askedContent.push(content); // Tandai konten sebagai sudah ditanyakan

    players[currentPlayerIndex].todAnswers.push({
        type: currentPlayersTodType,
        content: content // Simpan pertanyaan/tantangan yang dipilih
    });

    showSection('game-section');
    document.getElementById('game-player-name').innerText = players[currentPlayerIndex].name;
    document.getElementById('display-game-content').innerText = content;
}

// Logic untuk melanjutkan giliran di game, KHUSUS UNTUK TRUTH OR DARE
function nextGameTurn() {
    // Fungsi ini hanya dipanggil untuk Truth or Dare setelah pemain memilih Truth/Dare
    // dan konten ditampilkan, lalu menekan tombol "Lanjut".
    // Untuk Deep Talk, tombol 'Jawab' memanggil saveDeepTalkAnswer() yang sudah menangani giliran.

    currentTurnIndex++;
    if (currentTurnIndex >= totalTurnsPerPlayer) {
        currentPlayerIndex++; // Pindah ke pemain berikutnya
        currentTurnIndex = 0; // Reset giliran untuk pemain baru
    }

    if (currentPlayerIndex < players.length) {
        // Start turn notification for the next player
        showPlayerTurn(players[currentPlayerIndex]);
    } else {
        showResults(); // Semua pemain sudah selesai
    }
}


// Results Section
function showResults() {
  stopFallingHearts(); // Hentikan animasi background
  showSection('result-section');

  const resultsDisplayDiv = document.getElementById('results-display');
  resultsDisplayDiv.innerHTML = '<h3>Hasil Permainan:</h3>';

  players.forEach(p => {
    resultsDisplayDiv.innerHTML += `<p><strong>${p.name}:</strong></p><ul>`;
    if (gameType === 'deeptalk') {
        if (p.answers.length === 0) {
            resultsDisplayDiv.innerHTML += `<li>Belum ada jawaban Deep Talk.</li>`;
        } else {
            p.answers.forEach((data, i) => {
                resultsDisplayDiv.innerHTML += `<li><b>DT Q${i + 1}:</b> ${data.question}<br><b>A:</b> ${data.answer}</li>`;
            });
        }
    } else if (gameType === 'truthordare') {
        if (p.todAnswers.length === 0) {
            resultsDisplayDiv.innerHTML += `<li>Belum ada giliran Truth or Dare.</li>`;
        } else {
            p.todAnswers.forEach((data, i) => {
                resultsDisplayDiv.innerHTML += `<li><b>${data.type} ${i + 1}:</b> ${data.content}</li>`;
            });
        }
    }
    resultsDisplayDiv.innerHTML += '</ul>';
  });
}

function saveResult() {
  let text = `Hasil ${gameType === 'deeptalk' ? 'Deep Talk Multiplayer' : 'Truth or Dare Multiplayer'}:\n\n`;
  players.forEach(p => {
    text += `${p.name}:\n`;
    if (gameType === 'deeptalk') {
        p.answers.forEach((data, i) => {
            text += `  Pertanyaan ${i + 1} (${data.mode}): ${data.question}\n`;
            text += `  Jawaban: ${data.answer}\n\n`;
        });
    } else if (gameType === 'truthordare') {
        p.todAnswers.forEach((data, i) => {
            text += `  Giliran ${i + 1} (${data.type}): ${data.content}\n\n`;
        });
    }
    text += '\n';
  });
  const blob = new Blob([text], { type: 'text/plain' });
  const a = document.createElement('a');
  a.href = URL.createObjectURL(blob);
  a.download = `hasil-${gameType.replace(/\s+/g, '-')}.txt`;
  a.click();
}

function shareResult() {
  let text = `Hasil ${gameType === 'deeptalk' ? 'Deep Talk Multiplayer' : 'Truth or Dare Multiplayer'}:\n\n`;
  players.forEach(p => {
    text += `${p.name}:\n`;
    if (gameType === 'deeptalk') {
        p.answers.forEach((data, i) => {
            text += `  Pertanyaan ${i + 1} (${data.mode}): ${data.question}\n`;
            text += `  Jawaban: ${data.answer}\n\n`;
        });
    } else if (gameType === 'truthordare') {
        p.todAnswers.forEach((data, i) => {
            text += `  Giliran ${i + 1} (${data.type}): ${data.content}\n\n`;
        });
    }
    text += '\n';
  });
  if (navigator.share) {
    navigator.share({ text });
  } else {
    navigator.clipboard.writeText(text);
    alert('Hasil telah disalin ke clipboard');
  }
}

// Helper untuk menyembunyikan pesan error
function hideErrorMessage(id) {
    document.getElementById(id).classList.add('hidden');
    // Juga reset border input jika ada error yang terkait input
    const inputId = id.replace('-error', '');
    const inputEl = document.getElementById(inputId);
    if (inputEl) {
        inputEl.style.borderColor = '#000'; // Reset border to black
    }
    document.querySelectorAll(`#${id.replace('-error', '-inputs')} input`).forEach(input => {
        input.style.borderColor = '#000'; // Reset border to black
    });
}
</script>

</body>
</html>